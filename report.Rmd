---
params:
  data: NA
  likert: NA
  cat: NA
  num: NA
  NAlab: NA
  scale1: NA
  scale2: NA
  scale3: NA
  scale4: NA
  scale5: NA
  scale6: NA
  scale7: NA
  scale8: NA
  scale9: NA
  scale10: NA
  scale11: NA
  scale12: NA
  scale13: NA
  scale14: NA
  scale15: NA
  scale16: NA
  scale17: NA
  scale18: NA
  scale19: NA
  scale20: NA
output:
  pdf_document:
    toc: yes
  html_document:
    df_print: paged
  word_document:
    reference_docx: style.docx
---
```{r, include = FALSE}
# which are the ordered factors?
# ordvar <- c("Year", "v1", "v3", "v4", "v6", "v7", "v8", "v10")
# which are the unordered factors?
# catvar <- c("ID")
# which are numeric?
#numvar <- c("v2", "v5", "v9")
# which are scales?
# TBD

ordvar <- c("Cond", "MotCheck1", "MotCheck2", "MotCheck3","MsgType1","MsgType2","ValCheck1" ,"ValCheck2","ValCheck3", "age","attbase1.1","attbase1.2","attbase1.3","attbase1.4", "attbase1.5","attbase1.6","attbase1.7","attbase2.1","attbase2.2", "attbase2.3","attbase2.4", "attbase2.5","attbase2.6","attbase2.7","attbase2.8")
numvar <- c("tCogLoadCheck", "tCogLoadList","tInitialEss","tInst","tInst2","tInst3","tInstCogLoad","tMatchedMessage")
catvar <- c()
```

```{r, include = FALSE}
# load these packages
library(psych)
library(tidyverse)
library(knitr)

# chunk options defaults
knitr::opts_chunk$set(dpi = 150, out.width = "50%", out.height = "50%")

source("report_functions.R")

mydata <- read.csv(params$data)
# change responses equal to NAlab to become NAs
mydata[mydata == params$NAlab] <- NA
```

# Numerics Statistics

```{r, results= 'asis', warning = FALSE, echo = FALSE, fig.height = 6, fig.width = 8}
for (i in params$num){
  cat("##", i, "\n")
  cat("\n")
  descrip <- destable.cts(i, mydata)
  cat("\n")
  dens(i, data = mydata)
  boxp(i, data = mydata)
  cat("\n")
  print(descrip[["table"]])
  cat("\nNon-Numeric Elements Detected:")
  print(descrip[["nonnum"]])
  cat('\n')
}
```

\newpage

# Numeric Factors Statistics

```{r, results= 'asis', warning = FALSE, echo = FALSE, fig.align = "center", fig.height = 8, fig.width = 8}
for (i in params$likert){
  cat("##", i, "\n")
  descrip <- destable.cts(i, data = mydata)
  cat("\n")
  histo(i, data = mydata)
  cat("\n")
  print(freqtab(i, data = mydata))
  print(descrip[["table"]])
  cat("\nNon-Numeric Elements Detected: ")
  cat(descrip[["nonnum"]])
  cat("\n")
  cat("\\pagebreak")
}
```

\newpage

# Unordered Factors Statistics

```{r, results = 'asis', warning = FALSE, echo = FALSE, fig.align = "center", fig.height = 8, fig.width = 8}
for (i in params$cat){
  cat("##", i, "\n")
  cat("\n")
  print(freqtab(i, mydata))
  cat("\n")
}
```

\newpage

# Diagnostics

## Numeric Variables With Non-Numeric Responses

```{r, echo = FALSE, results = "asis"}
temp <- data.frame("Non Numerics" = nnlist)
print(kable(temp))
```

## Numeric Variables With Skewed Responses

```{r, echo = FALSE, results = "asis"}
temp <- data.frame("Skewed" = skews)
print(kable(temp))
```

```{r}
print(params$scale1)
```